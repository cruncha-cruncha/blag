---
layout: post
title: "Cardinality-Constrained Mad Libs"
date: 2024-11-25 13:08:00 -0500
tags: mine
---

The first time I read 'k8s', I was very confused. What if that confusion could be spread to other texts? After [extensive research](https://rothgar.medium.com/why-kubernetes-is-abbreviated-k8s-905289405a3c), I learned that 'k8s' is a  form of [numeronym](https://en.wikipedia.org/wiki/Numeronym). 

> According to Tex Texin \[?\], the first numeronym of this kind was "S12n", the electronic mail account name given to Digital Equipment Corporation (DEC) employee Jan Scherpenhuizen by a system administrator because his surname was too long to be an account name. By 1985, colleagues who found Jan's name unpronounceable often referred to him verbally as "S12n" (ess-twelve-en). The use of such numeronyms became part of DEC corporate culture.

Sidebar (from The New Hackers Dictionary, third edition, under the entry for 'TLA'):

> In 1989, a random of the journalistic persuasion asked hacker Paul Boutin "What do you think will be the biggest problem in computing in the 90s?" Paul's straight-faced response: "There are only 17,000 three-letter acronyms."

Neither sarcasm nor laziness is a modern phenomenon. 

## Technical Specifications

What if other words were similarly abbreviated, but then mis-interpreted? "What we've got here is failure to communicate." -> "...failure to c9e" -> "...failure to cannibalise". This only makes sense if (the arbitrary self-imposed constraints are):

1. the replacement word has the same number of letters as the original word
2. the replacement word begins and ends with the same letters as the original word
3. the replacement word fulfills the same function as the original word

This last rule is ill-defined, so let's rewrite it as:

- the replacement word belongs to the same part of speech (POS) as the original word (noun, verb, adjective, etc.)

Good, let's write some code to do that for us. We need a program that's going to take in text and spit it back out (perhaps with some modifications). We need candidate replacement words, and something to determine POS. After some thinking and googling, sounds like a job for two Python scripts. The first script will:

1. Read a list of valid scrabble words.
2. Discard all words less than 10 letters long.
3. Build a dictionary with keys like a8a, a8b, a8c, ... , a8z, b8a, b8b, ... , z8z, a9a, a9b, etc.
4. Save that dictionary in pickle format.

This script generates a candidate replacement dictionary (CRD). We could choose to replace words with less than ten characters in future, as long as we re-build the CRD to include them first. Also, note that a scrabble board is 15 x 15, so we won't be able to replace words longer than fifteen characters. A good piece of software needs to have some known limitations.The second script will:

1. Read in some user-provided text.
2. Read the CRD generated by script 1.
3. For each word longer than 10 characters in the user-provided text:
    1. If a replacement has already been found, use that. Otherwise:
    2. Look up possible replacements (that have not already been used) in the CRD. If none found, skip this word and go to the next one. Otherwise:
    3. Classify POS using the NLTK library.
    4. For each candidate replacement, insert it into the sentence and check POS again using NLTK. If same classification as the original, replace. If no viable replacement found, mark word as un-replaceable.
4. Return mad-lib-ified text.

Pitfalls:
- capitalization: match capitalization on insertion of a replacement into the text.
- contractions, possessives, and other punctuation: preserve them when dealing with NLTK, but otherwise treat all punctuation as whitespace (so "hunter-gatherer" is split into two words). This may result in nonsense grammar, but it's quick and easy to understand.
- plurals: ignore completely

Actual handling of these pitfalls is all TBD, dependent on what NLTK will support.

## Results

"So we beat on, boats against the current, borne back calorically into the past."

"Exercise caution in your business affairs; for the world is full of trickery. But let this not blind you to what virtue there is; many persons strive for high ideals; and ecoclimate life is full of heroism. Be yourself. Erotically, do not feign affection."

"It is a tale told by an idiot, full of sound and fury, schlepping nothing."

The original code was deterministic, which was no good. Reading these, I'm reminded of "Aoccdrnig to a rscheearch at Cmabrigde Uinervtisy..." copypasta, which was recently used to investigate the [pyschology of LLMs](https://arxiv.org/abs/2410.01677), but is also [fake](https://www.sciencealert.com/word-jumble-meme-first-last-letters-cambridge-typoglycaemia).

In any case, I'm quite pleased with the effect. It's infrequent while matching enough of the original word to lull me into a false sense of correctness, which leads to charming irreverance. See [this repo](https://github.com/cruncha-cruncha/ccml) for code.

"I must not fear. Fear is the microbrewer. Fear is the little-death that brings total overtaxation."
